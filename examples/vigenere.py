#!/usr/bin/python

from lantern.modules import vigenere
from lantern.analysis import frequency
from lantern.fitness import ChiSquared

ciphertext = """HNQDLVYOPOKFACCEKYATQNEPPTUKPCVVGBXYLPCZIIZTGORRNETKVILSVOHZUCQWTLAETMVZTEUMEEKANRETRETKVILSVOHRMTGBFRUKVKQGLRKXKUHMPUMUZTJOCILANVECPKGLYKKIFISLPNAYYIAHTOIGPEEOTJFCJYPFNYCXHJAEERRFIRCSRVCETDEBLANYSBIEJSRUAHGOCVZOHDLVOAEUIIKIFISLLVGBAFUDGBAYHTOKHVOIODMTRWJKXWVREOWJOAROHYPMYREKTAAREMLMQVHVKHKWMRTAJKGBLRGXXVYMAGSISDOSRVPSCGSISDVREKIEISRJDIVRWTOOQVMDZMCBXVYTJKRDVSVYJKOEQDLVYKKNWKOIUMVRWTJOCKLAERYJIOTOWDLDCWRLUDGBETOIGFIIAHGIVVHLNKPZREKWMEQUPSSIOIIRSIOIIRWTOOQVMMLLKCXVUEFDSKLAERIIZEZZPRPNHYVKOEHSJKLEPDLKPMGRSNAOTOHLJECPVRJTKYRZBNFOVJAAPNMKUOOCWDPTJSHZKNVCLFDMAGSIRIFSHZAIPWCYLAFNEDUKKNTIVBCLPPJORSIUPTVRIPYECVPRSIMOMDHDGKHZZCQFIIFTQNEPPFQERUHCQWTLAETGEZAAUOGFUDVRMJPSEYSCPTFYIJDHCDMNHNVSXKVIHSXDHKGCEDPSVKOVPTULITHUUOMJJRGGIUPTWZRFABGMELZEKDHFLSPDPZREOOSIMEGVWKORGKXVUEFLCDLOTDLZUKUSQRZMCBXRZSQBHFLSPDPZREVOETOIPQEEKSJYYCKNVLIYLRGNEDUKKNECSHGNSVZIUZPRFGCWIJAHGIVVHLNKPZRECXHKOEPSXYHPRORVKAFYSIVPGXIUAOCGSISDTEWYPNIDLIVUIRXYLPJYRVSIPOPZREJOVFPNVRVFBGJKRRKDKMXJCEKXWRUENOGKYOPSGGBLUOMJZEPDSLAATOJLNEHBSDAHGNEPAOFKCZUCQWTVAEPMMVZIUCSLNHVKFFHRFSWWVUPNXYPSKCMKAHKCMJDHGBIZIENYRXPKPYAVCETISELHGBIVCEPSJZCEPOZVYMGDXYLMPOZVYTCVOVKTQDLVTMCIRVCETRIRYFTYQKOEOKKRPNKURFDYQEECSDCWRBPDVIMENURDLVWHQXICPNGKKRPNVRIPYECVPRSIMOCFBBGDCFBRCCWNLRGKPCHLKUINLVGLIVUSRYSEMEFLESFFQYHRASERSFSWJORNLHWXKVYEFPSIZTGKOKOEDSXJVFOOEKAHCDCFBDKNPVASNSTKORQEKYDETOTILCJOAVKAPNXRZTGVIJZWGFISLEPNSDPNCDIUIYUKHZZTUYVZNNQBIUIYVRIRWAVRIKPCVRIWLWVREKOAFCSDLTJSRXAOVOETOFQERUBSYSPCPNIZYGPLULYKAHQCIWLWCBICPKGNVFWSQPARAETSRKOEFOWVYTVRMJPSQEVNVRNNRFDTJOAFYLFYJKOEGVITARQXEEKTJOWNPTERXYLBGKYKFOHDLVIAWNAVTAMOYJLOHKWVYVKMIRSRGKHPLXKCXZUGYSXYVUVZEPPNIPSIDHCDGFBLFLIUPRVMLVHPKPMKDAUXXIBNDITIVFKDIVYIPQKCBTVYRJHNFISLJANVYJJRKWMEHLUGIVEPNYVVHNFISLJANVYJJRKWMEHLUGIJLEMKJKLRMXSNSEFQIRUDAYYTHLNEWTYIOSRRSSYOIOPSVGMKOOWDWBPNEYPFYWKDLFBTPKXZVNCVMKFWKDLFBTTOPZNIQEWSPAUKRUFOWMECSUUMVZTIPKPJFOWLYZSDCDSDPCDYQSZYQEARNEYKVJFOWWYIKETMLVHTCXHCPEVYYJHNFDVPAOOKOVBSDOPZLVGSXJMOTYYIVWPQSFKYGDAVYEVRITYIOSRRSSAOWZHMCMVZTIPKPDFCTSQVPSVREKVFEEVZVSKDCDFCTSQVPSVREKVFLEHXPNIZIFWLGLCNOAVDLVFSCIEEKTJSRBUOVGLRATJOCCVOMVMBLMAMVZTEKCXYHTQPSLASOKVKPNIISLZOOOXYPNIDLRAYQEAZSLPOZVYFQBKZCEOOJFYICWEYHCMOVRUDVRMJPSOIQRUIHOWKVYQEQRFSVYTKOIUSRUPVKNYRSBWDCFBCCXXJAOREWRSLCPXVYANVAVYECVPRSIMO"""

decryption = vigenere.crack(ciphertext, ChiSquared(frequency.english.unigrams), max_key_period=30)
print(decryption)
